# Lagom Client Restaurant

Contains two Lagom microservices, MenuItem and Order.  OrderStream will stream Order events.  Restaurant acts as a client, consuming MenuItem and Order services.  This project will deploy to minikube, provided that you have kafka and cassandra endpoints set up in the correct spaces.

## Setup
There are a lot of components necessary to run this project in a kubernetes environment.  If you plan to run this locally, follow the [setup guide](docs/setup.md).  If not, you will need the following resources available:

1. An instance of Cassandra, accessible at `cassandra.cassandra`
2. An instance of Kafka, accessible at `restaurant-strimzi-kafka-bootstrap.kafka:9092`

Alternatively, you can edit the endpoints in the appropriate configuration manifests, for [menu-item-impl](menu-item-impl/deploy/kubernetes/menu-item-config.yaml) and [restaurant-client](restaurant-client/deploy/kubernetes/restaurant-client-config.yaml).

## Building the project
This project is aggregated, for your convenience.  Once you have set up minikube, you can build the project and publish it with the following process.

1. Set up a terminal to use minikube's docker daemon
    ```shell script
    eval $(minikube docker-env)
    ```
2. Build and publish the containers to minikube's docker repository
    ```sbtshell
    sbt docker:publishLocal
    ```
3. Apply the manifests.
    ```shell script
    kubectl apply -f menu-item-impl/deploy/kubernetes
    kubectl apply -f restaurant-client/deploy/kubernetes
    ```
## Understanding the project

This project has multiple components.
1. To understand the Lagom Client, see the documentation [here](docs/lagom-client.md)

>This project has been generated by the lagom/lagom-scala.g8 template. 

>For instructions on running and testing the project, see https://www.lagomframework.com/get-started-scala.html.
