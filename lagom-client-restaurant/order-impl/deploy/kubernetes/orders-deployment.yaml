 apiVersion: apps/v1
 kind: Deployment
 metadata:
   name: bbq-orders
   namespace: default
   labels:
     app: bbq-orders
 spec:
   replicas: 3
   selector:
     matchLabels:
       app: bbq-orders
   template:
     metadata:
       labels:
         app: bbq-orders
       annotations: # Annoations used for Enterprise Suite Metrics
         "prometheus.io/scrape": "true"
         "prometheus.io/scheme": "http"
         "prometheus.io/path": "/metrics"
         "prometheus.io/port": "9001"
     spec:
       serviceAccountName: bbq-orders-sa
       containers:
       - name: bbq-orders
         image: bbq-orders:0.1-SNAPSHOT
         ports:
         - name: http
           containerPort: 9000
         - name: akka-remote
           containerPort: 2551
         - name: akka-mgmt-http
           containerPort: 8558
         - name: prometheus # Used for Enterprise Suite Metrics
           containerPort: 9001
         envFrom:
         - configMapRef:
             name: bbq-orders-config
         env:
           - name: "HTTP_BIND_ADDRESS"
             value: "0.0.0.0"
           - name: JAVA_OPTS
             value: "-Dconfig.resource=application.prod.conf -XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap"
           - name: "HOST_ADDRESS"
             valueFrom:
               fieldRef:
                 fieldPath: "status.podIP"        
         resources:
           requests:
             memory: "256Mi"
             cpu: "100m"
           limits:
             memory: "1Gi"
         readinessProbe:
           httpGet:
             path: /ready
             port: akka-mgmt-http
           initialDelaySeconds: 10
           periodSeconds: 5
         livenessProbe:
           httpGet:
             path: /alive
             port: akka-mgmt-http
           initialDelaySeconds: 90
           periodSeconds: 30
